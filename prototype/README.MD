# üé≤ GameAdvisor - Assistant IA pour Jeux de Soci√©t√©

## üéØ Vue d'ensemble

**GameAdvisor** est un assistant intelligent sp√©cialis√© dans l'aide aux joueurs de jeux de soci√©t√©. L'application permet d'analyser les r√®gles de jeux, r√©pondre aux questions sur les m√©caniques de jeu, aider √† la mise en place et au calcul des scores.

*"Il se tape les r√®gles, vous vous tapez des barres"*

## üèóÔ∏è Architecture Technique

### Stack Technologique
- **Backend** : Python 3.10+
- **Interface** : Streamlit avec th√®me personnalis√©
- **IA** : Azure OpenAI (GPT-4o) via LangChain
- **Base de donn√©es vectorielle** : ChromaDB
- **Traitement d'images** : PyMuPDF, Pillow
- **Containerisation** : Docker

### Structure du Projet
```
prototype/
‚îú‚îÄ‚îÄ classes/                    # Architecture modulaire
‚îÇ   ‚îú‚îÄ‚îÄ agent_manager.py       # Gestionnaire agent principal
‚îÇ   ‚îú‚îÄ‚îÄ hybrid_rag_manager.py  # RAG hybride (m√©tadonn√©es + images)
‚îÇ   ‚îú‚îÄ‚îÄ rag_manager.py         # RAG classique (texte uniquement)
‚îÇ   ‚îú‚îÄ‚îÄ rag_factory.py         # Factory pattern pour RAG
‚îÇ   ‚îú‚îÄ‚îÄ interface_manager.py   # Interface Streamlit
‚îÇ   ‚îú‚îÄ‚îÄ message_manager.py     # Traitement messages/fichiers
‚îÇ   ‚îú‚îÄ‚îÄ image_store_manager.py # Stockage local d'images
‚îÇ   ‚îú‚îÄ‚îÄ audio_manager.py       # Gestion audio (exp√©rimental)
‚îÇ   ‚îî‚îÄ‚îÄ settings.py           # Configuration centralis√©e
‚îú‚îÄ‚îÄ stored_images/             # Images de r√®gles par jeu
‚îÇ   ‚îú‚îÄ‚îÄ uno/                  # R√®gles UNO
‚îÇ   ‚îú‚îÄ‚îÄ zombicide/            # R√®gles Zombicide
‚îÇ   ‚îú‚îÄ‚îÄ fort/                 # R√®gles Fort
‚îÇ   ‚îî‚îÄ‚îÄ default/              # Jeux divers
‚îú‚îÄ‚îÄ chroma_db/                # Base vectorielle persistante
‚îú‚îÄ‚îÄ tests/                    # Tests unitaires
‚îú‚îÄ‚îÄ main.py                   # Point d'entr√©e
‚îú‚îÄ‚îÄ requirements.txt          # D√©pendances Python
‚îî‚îÄ‚îÄ Dockerfile               # Configuration conteneur
```

## üöÄ Fonctionnalit√©s Principales

### 1. **Assistant IA Conversationnel**
- Chat interactif avec historique persistant
- R√©ponses contextualis√©es bas√©es sur les r√®gles t√©l√©charg√©es
- Support multimodal (texte + images)

### 2. **Analyse Intelligente des R√®gles**
- **Upload** : PDF et images (PNG, JPG, JPEG)
- **Extraction** : Texte, diagrammes, composants de jeu
- **Classification** : Setup, gameplay, scoring, fin de partie

### 3. **Syst√®me RAG Avanc√© (3 Modes)**

#### **Mode Classique** üî§
- Extraction compl√®te du texte des documents
- Vectorisation avec embeddings Azure OpenAI
- Recherche s√©mantique dans ChromaDB
- Id√©al pour : r√®gles textuelles denses

#### **Mode Hybride** üñºÔ∏è
- Extraction de m√©tadonn√©es structur√©es
- Stockage local des images + m√©tadonn√©es vectoris√©es
- Combinaison contexte textuel + images directes √† l'IA
- Id√©al pour : r√®gles avec sch√©mas/diagrammes

#### **Mode Direct** ‚ö°
- Envoi direct des images au mod√®le vision
- Aucune vectorisation pr√©alable
- Analyse en temps r√©el
- Id√©al pour : questions ponctuelles

### 4. **Gestion Multi-Jeux**
- Organisation par nom de jeu
- Stockage s√©par√© des r√®gles
- Bases vectorielles d√©di√©es par jeu

### 5. **Interface Utilisateur Avanc√©e**
- Design personnalis√© (th√®me GameAdvisor)
- Upload par glisser-d√©poser
- Mode debug avec logs d√©taill√©s
- S√©lecteur de m√©thode RAG
- Boutons de gestion (reset, clear stores)

## ‚öôÔ∏è Configuration

### Variables d'Environnement
```env
SUBSCRIPTION_KEY=your-azure-subscription-key
```

### Mod√®les Azure OpenAI Configur√©s
```python
# Agent principal (r√©ponses finales)
agent-gpt-4o

# RAG Classique
rag_vision-gpt-4o          # Extraction texte
rag_embedding-text-embedding-3-large  # Vectorisation

# RAG Hybride  
hybrid_vision-gpt-4o       # Extraction m√©tadonn√©es
hybrid_embedding-text-embedding-3-large  # Vectorisation m√©tadonn√©es
```

## üîß Installation et D√©marrage

### Installation Locale
```bash
# Cloner le repository
git clone [repository-url]
cd Gaming-advisor/prototype

# Cr√©er environnement virtuel
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# ou .venv\Scripts\activate  # Windows

# Installer d√©pendances
pip install -r requirements.txt

# Configurer variables d'environnement
cp .env.example .env
# √âditer .env avec vos cl√©s API

# Lancer l'application
streamlit run main.py
```

### D√©marrage Docker
```bash
# Construire l'image
docker build -t gameadvisor .

# Lancer le conteneur
docker run -p 8501:8501 --env-file .env gameadvisor
```

## üì± Utilisation

### 1. **Pr√©parer les R√®gles**
1. S√©lectionner un nom de jeu dans la sidebar
2. Choisir la m√©thode RAG appropri√©e
3. Uploader les fichiers PDF/images des r√®gles
4. Cliquer sur "Vectoriser les documents" (modes Classique/Hybride)

### 2. **Poser des Questions**
- Questions g√©n√©rales : *"Comment commence une partie ?"*
- Clarifications : *"Que faire en cas d'√©galit√© ?"*
- Calculs : *"Comment calculer les points ?"*
- Images dans questions : Upload direct via chat

### 3. **Gestion**
- **Reset conversation** : Vider l'historique
- **Clear stores** : Supprimer donn√©es vectoris√©es
- **Mode debug** : Afficher logs d√©taill√©s

## üß† Intelligence Artificielle

### Prompts Syst√®me Sp√©cialis√©s
- **Agent Principal** : Ma√Ætre de jeu et assistant r√®gles
- **RAG Vision Classique** : Extraction compl√®te texte + sch√©mas
- **RAG Vision Hybride** : M√©tadonn√©es structur√©es pour recherche

### Optimisations
- **Gestion m√©moire** : Historique limit√© (20 messages)
- **Token management** : Exclusion images de l'historique
- **Cache intelligent** : R√©utilisation contextes RAG
- **Multimodal efficace** : Images base64 optimis√©es

## üîç Architecture des Classes

### Patterns Utilis√©s
- **Singleton** : Settings, AgentManager (instance unique)
- **Factory** : RAGFactory (cr√©ation dynamique RAG)
- **Adapter** : RAG adapters (interface commune)
- **Observer** : Log capture (mode debug)

### Classes Principales
- `AgentManager` : Orchestrateur IA principal
- `RAGFactory` : Factory pour gestionnaires RAG
- `InterfaceManager` : Gestionnaire interface Streamlit
- `MessageManager` : Traitement fichiers multimodaux
- `ImageStoreManager` : Stockage local optimis√©

## üß™ Tests

```bash
# Lancer tests unitaires
pytest tests/

# Tests sp√©cifiques
pytest tests/test_message_manager.py -v
```

## üéÆ Jeux Support√©s

Le syst√®me est con√ßu pour fonctionner avec tous types de jeux de soci√©t√© :
- **Jeux √† r√®gles complexes** : Zombicide, Gloomhaven
- **Jeux familiaux** : UNO, Monopoly  
- **Jeux de strat√©gie** : Catan, 7 Wonders
- **Jeux de cartes** : Magic, Pok√©mon

### Exemples Int√©gr√©s
- **UNO** : R√®gles + variantes
- **Zombicide** : Livret complet
- **Fort** : M√©caniques deck-building

## üöÄ D√©veloppement Futur

### Fonctionnalit√©s Pr√©vues
- [ ] Support audio (questions vocales)
- [ ] D√©tection automatique du jeu
- [ ] API REST pour int√©grations externes  
- [ ] Mode multi-joueurs (session partag√©e)
- [ ] Export des r√®gles r√©sum√©es
- [ ] Statistiques d'utilisation

### Am√©liorations Techniques
- [ ] Cache Redis pour performances
- [ ] Support bases vectorielles cloud
- [ ] Pipeline CI/CD automatis√©
- [ ] Monitoring et analytics
- [ ] Tests d'int√©gration complets

## üìä M√©triques et Performance

### Capacit√©s Actuelles
- **Documents** : Support PDF multi-pages + images
- **Taille** : Jusqu'√† 10MB par fichier
- **Formats** : PNG, JPG, JPEG, PDF
- **Langues** : Fran√ßais (priorit√©), support multilingue
- **Temps de r√©ponse** : ~2-5 secondes selon complexit√©

### Optimisations
- Redimensionnement automatique des images
- Compression intelligente base64
- Chunking adaptatif pour gros documents
- Cache embeddings pour r√©utilisation

## ü§ù Contribution

### Setup D√©veloppement
1. Fork du repository
2. Cr√©er une branche feature
3. Impl√©menter + tests
4. Pull Request avec description d√©taill√©e

### Standards Code
- **Python** : PEP 8, type hints
- **Tests** : Coverage >80%
- **Documentation** : Docstrings obligatoires
- **Git** : Messages commits conventionnels

## üìÑ Licence

Projet d√©velopp√© dans le cadre d'une formation. Tous droits r√©serv√©s.

---

*D√©velopp√© avec ‚ù§Ô∏è pour simplifier vos soir√©es jeux*

**Version** : 1.0.0-prototype  
**Derni√®re mise √† jour** : Septembre 2024